{% extends "base.html" %}
{% block content %}
<h2>Movies</h2>

<h2>Movies</h2>

<form method="get" class="mb-3">
  <div class="row g-2" style="max-width: 700px;">
    <div class="col-md-6">
      <input type="text" name="q" class="form-control"
             placeholder="Search by title" value="{{ q or '' }}">
    </div>
    <div class="col-md-4">
      <select name="genre_id" class="form-select">
        <option value="">All genres</option>
        {% for g in genres %}
          <option value="{{ g['genre_id'] }}"
            {% if genre_id and genre_id|int == g['genre_id'] %}selected{% endif %}>
            {{ g["name"] }}
          </option>
        {% endfor %}
      </select>
    </div>
    <div class="col-md-2">
      <button class="btn btn-outline-secondary w-100" type="submit">Filter</button>
    </div>
  </div>
</form>



<table class="table table-striped">
  <thead>
    <tr>
      <th>Title</th>
      <th>Year</th>
      <th>Details</th>
    </tr>
  </thead>
  <tbody>
    {% for m in movies %}
      <tr>
        <td>{{ m["title"] }}</td>
        <td>{{ m["release_year"] }}</td>
        <td>
          <a class="btn btn-sm btn-secondary"
             href="{{ url_for('movie_detail', movie_id=m['movie_id']) }}">
            View
          </a>
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>

<a href="{{ url_for('stats') }}" class="btn btn-outline-primary">View Stats</a>
{% endblock %}
